# üèÉ Guia Completo de Sprints - Ritmo de Execu√ß√£o

**Objetivo:** Entender como funcionam as Sprints no sistema GGV

---

## üìã O Que S√£o Sprints?

**Sprints** (ou "Rituais de Execu√ß√£o") s√£o **ciclos de trabalho recorrentes** onde o time:

1. Define **iniciativas** (o que vai fazer)
2. Registra **impedimentos** (o que est√° bloqueando)
3. Toma **decis√µes** (resolu√ß√µes importantes)
4. Executa **atividades** (tarefas operacionais)
5. Define **marcos** (milestones importantes)

### Tipos de Sprint

| Tipo | Dura√ß√£o | Uso Recomendado |
|------|---------|-----------------|
| **Semanal** | 7 dias | Equipes t√°ticas, execu√ß√£o r√°pida |
| **Mensal** | ~30 dias | Projetos m√©dios, departamentos |
| **Trimestral** | 90 dias | OKRs estrat√©gicos |
| **Semestral** | 180 dias | Objetivos de longo prazo |
| **Anual** | 365 dias | Planejamento estrat√©gico |

---

## üéØ Anatomia de uma Sprint

### Estrutura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ SPRINT COMERCIAL W3 - JAN 2026              ‚îÇ
‚îÇ üìÖ 15/01/2026 - 22/01/2026                  ‚îÇ
‚îÇ üè¢ Departamento: Comercial                  ‚îÇ
‚îÇ üéØ Status: Em Execu√ß√£o                      ‚îÇ
‚îÇ üìä Progresso: 60% (3/5 conclu√≠das)          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                             ‚îÇ
‚îÇ üìã INICIATIVAS & ENTREGAS (5)               ‚îÇ
‚îÇ   ‚úÖ Campanha LinkedIn Ads                  ‚îÇ
‚îÇ   ‚úÖ Webinar B2B                            ‚îÇ
‚îÇ   ‚úÖ Treinamento de vendas                  ‚îÇ
‚îÇ   ‚è≥ Atualizar CRM                          ‚îÇ
‚îÇ   ‚è≥ Criar apresenta√ß√£o Enterprise          ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ üõ°Ô∏è IMPEDIMENTOS (2)                         ‚îÇ
‚îÇ   ‚ö†Ô∏è CRM fora do ar                         ‚îÇ
‚îÇ   ‚ö†Ô∏è Or√ßamento de Ads bloqueado             ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ üí¨ DECIS√ïES DO CICLO (1)                    ‚îÇ
‚îÇ   "Aprovar desconto 20% para Enterprise"    ‚îÇ
‚îÇ                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Componentes de uma Sprint

#### 1. **Iniciativas & Entregas** üìã

**O que √©:** A√ß√µes que o time vai executar durante a sprint

**Exemplos:**
- Lan√ßar campanha de LinkedIn Ads
- Realizar webinar sobre produto
- Treinar time de vendas
- Atualizar base de leads no CRM
- Criar deck de vendas para Enterprise

**Campos:**
- ‚úÖ T√≠tulo (obrigat√≥rio)
- Descri√ß√£o (opcional)
- Respons√°vel (opcional)
- Data limite (opcional)
- Status (Pendente ‚Üí Em Andamento ‚Üí Conclu√≠do)

#### 2. **Impedimentos** üõ°Ô∏è

**O que √©:** Bloqueios que est√£o impedindo o time de executar

**Exemplos:**
- CRM fora do ar
- Falta de aprova√ß√£o de or√ßamento
- Depend√™ncia de outro time
- Ferramenta n√£o funciona
- Falta de recursos

**Uso:**
- Registrar para visibilidade
- Priorizar resolu√ß√£o
- Acompanhar em reuni√µes

#### 3. **Decis√µes do Ciclo** üí¨

**O que √©:** Resolu√ß√µes importantes tomadas durante a sprint

**Exemplos:**
- "Aprovar desconto de 20% para clientes Enterprise"
- "Adiar feature X para pr√≥ximo trimestre"
- "Contratar 2 SDRs no Q2"
- "Mudar ferramenta de CRM"

**Uso:**
- Registro hist√≥rico
- Alinhamento do time
- Refer√™ncia futura

#### 4. **Atividades** ‚ö°

**O que √©:** Tarefas operacionais recorrentes

**Exemplos:**
- Atualizar dashboard semanal
- Revisar pipeline de vendas
- Enviar relat√≥rio ao CEO
- Backup de dados

#### 5. **Marcos** üö©

**O que √©:** Milestones ou entregas importantes

**Exemplos:**
- Lan√ßamento de produto
- Fechamento de contrato grande
- Atingir meta de R$ 1M
- Concluir integra√ß√£o t√©cnica

---

## üîÑ Ciclo de Vida de uma Sprint

### 1. **Planejamento** üìù

```
Status: Planejada
A√ß√µes:
  - Definir t√≠tulo e descri√ß√£o
  - Definir datas
  - Vincular a OKRs
  - Planejar iniciativas (opcional)
```

### 2. **Execu√ß√£o** üèÉ

```
Status: Em Andamento
A√ß√µes:
  - Adicionar iniciativas conforme surgem
  - Marcar itens como conclu√≠dos
  - Registrar impedimentos
  - Tomar decis√µes
  - Atualizar progresso
```

### 3. **Finaliza√ß√£o** ‚úÖ

```
Status: Conclu√≠da
A√ß√µes:
  - Clicar "Finalizar Sprint"
  - Sistema cria pr√≥xima sprint automaticamente
  - Itens pendentes s√£o copiados (carry-over)
  - Sprint antiga fica no hist√≥rico
```

### 4. **Recorr√™ncia** üîÅ

```
Sprint Atual (W3)
    ‚îî‚îÄ Finalizar
        ‚Üì
    Sprint Pr√≥xima (W4)
        ‚îî‚îÄ Itens Pendentes copiados com flag is_carry_over
        ‚îî‚îÄ Novos itens podem ser adicionados
```

---

## üí° Como Funciona: Passo a Passo T√©cnico

### Criar uma Sprint

#### Frontend (SprintForm.tsx)

```typescript
// 1. Valida√ß√£o com Zod
const schema = z.object({
  title: z.string().min(5),
  type: z.enum(['semanal', 'mensal', ...]),
  okr_ids: z.array(z.string()).max(3)
});

// 2. Submit
const onSubmit = async (data) => {
  const result = await sprintStore.createSprint(
    sprintData,
    [], // items iniciais
    data.okr_ids
  );
};
```

#### Store (sprintStore.ts)

```typescript
createSprint: async (sprint, items, okrIds) => {
  set({ loading: true });
  
  // Chama servi√ßo
  const created = await sprintService.createSprintWithItems(
    sprint, 
    items, 
    okrIds
  );
  
  // Atualiza estado
  set({ 
    sprints: [created, ...state.sprints],
    selectedSprint: created,
    loading: false 
  });
  
  return created;
}
```

#### Service (sprint.service.ts)

```typescript
export async function createSprintWithItems(
  sprint, 
  items, 
  okrIds
) {
  // 1. Criar sprint
  const createdSprint = await createSprint(sprint);
  
  // 2. Criar items
  for (const item of items) {
    await createSprintItem({ ...item, sprint_id: createdSprint.id });
  }
  
  // 3. Vincular OKRs
  if (okrIds.length > 0) {
    await updateSprintOKRs(createdSprint.id, okrIds);
  }
  
  return { ...createdSprint, items, okr_ids: okrIds };
}
```

#### Supabase (SQL)

```sql
-- 1. INSERT Sprint
INSERT INTO sprints (title, type, department, start_date, end_date, status, created_by)
VALUES ('Sprint W3', 'semanal', 'comercial', '2026-01-15', '2026-01-22', 'em andamento', 'user123');

-- 2. INSERT Items (se houver)
-- (neste caso n√£o h√° items iniciais)

-- 3. INSERT Sprint OKRs
INSERT INTO sprint_okrs (sprint_id, okr_id)
VALUES 
  ('sprint123', 'okr1'),
  ('sprint123', 'okr2');
```

---

### Adicionar Iniciativa

#### Frontend (SprintItemForm.tsx)

```typescript
// 1. Valida√ß√£o manual
if (!formData.title.trim() || formData.title.length < 3) {
  addToast('T√≠tulo obrigat√≥rio (min 3 caracteres)', 'error');
  return;
}

// 2. Submit
const result = await sprintService.createSprintItem({
  sprint_id,
  type: 'iniciativa',
  title: formData.title.trim(),
  description: formData.description || null,
  responsible: formData.responsible || null,
  responsible_user_id: formData.responsible_user_id || null,
  status: formData.status,
  due_date: formData.due_date || null,
  project_id: formData.project_id || null
});
```

#### Service (sprint.service.ts)

```typescript
export async function createSprintItem(item) {
  // 1. Verificar autentica√ß√£o
  const { data: userData } = await supabase.auth.getUser();
  if (!userData.user) throw new Error('N√£o autenticado');

  // 2. Preparar dados com fallback
  const fullData = { ...item, created_by: userData.user.id };
  const minimalData = { sprint_id, type, title, status };

  // 3. Tentar inserir
  try {
    return await insert(fullData);
  } catch (error) {
    if (error.message.includes('column')) {
      // Fallback: apenas obrigat√≥rias
      return await insert(minimalData);
    }
    throw error;
  }

  // 4. Invalidar cache
  invalidateSprintCache(item.sprint_id);
}
```

#### Supabase (SQL)

```sql
-- Inser√ß√£o com fallback autom√°tico
INSERT INTO sprint_items (
  sprint_id, 
  type, 
  title, 
  description, 
  responsible,
  status,
  due_date,
  created_by  -- Se coluna existir
) VALUES (
  'sprint123',
  'iniciativa',
  'Campanha LinkedIn',
  'Segmenta√ß√£o Enterprise',
  'Geraldo Hisao',
  'pendente',
  '2026-01-20',
  'user123'
);
```

---

### Marcar Item como Conclu√≠do

#### Frontend (SprintItemRow.tsx)

```typescript
// Click no checkbox
const toggleStatus = () => {
  const newStatus = isCompleted ? 'pendente' : 'conclu√≠do';
  onUpdate(item.id, { status: newStatus });
};

// Renderiza√ß√£o
<button onClick={toggleStatus}>
  {isCompleted ? '‚úÖ' : '‚≠ï'}
</button>
```

#### Service (sprint.service.ts)

```typescript
export async function updateSprintItem(id, updates) {
  // 1. Atualizar no banco
  const { data } = await supabase
    .from('sprint_items')
    .update({ status: 'conclu√≠do' })
    .eq('id', id)
    .select()
    .single();

  // 2. Invalidar cache
  invalidateSprintCache(data.sprint_id);
  
  return data;
}
```

#### Supabase (SQL)

```sql
UPDATE sprint_items 
SET status = 'conclu√≠do', updated_at = NOW()
WHERE id = 'item123';
```

#### Frontend (Atualiza√ß√£o Visual)

```typescript
// 1. Store chama refreshSprint()
await refreshSprint();

// 2. refreshSprint for√ßa reload
await fetchSprintById(sprintId, true); // skipCache = true

// 3. getSprintById carrega novos dados
const sprint = await getSprintById(sprintId, true);

// 4. Componente re-renderiza
// - Checkbox fica verde ‚úÖ
// - T√≠tulo fica riscado
// - Barra de progresso atualiza
// - Contador atualiza (3/5 ‚Üí 4/5)
```

---

### Finalizar Sprint

#### Frontend (SprintDetailStyled.tsx)

```typescript
const handleFinalizeAndRotate = async () => {
  // 1. Confirma√ß√£o
  if (!confirm('Finalizar e criar pr√≥xima?')) return;
  
  // 2. Chamar store
  const nextSprint = await finalizeAndCreateNext(sprintId);
  
  // 3. Redirecionar
  if (nextSprint?.id) {
    await fetchSprintById(nextSprint.id);
  }
};
```

#### Service (sprint.service.ts)

```typescript
export async function finalizeAndCreateNext(currentSprintId) {
  // 1. Buscar sprint atual
  const current = await getSprintById(currentSprintId);
  
  // 2. Marcar como conclu√≠da
  await updateSprint(currentSprintId, { status: 'conclu√≠da' });
  
  // 3. Calcular datas da pr√≥xima
  const nextDates = calculateNextSprintDates(
    current.end_date, 
    current.type
  );
  // Exemplo: end_date = 22/01 ‚Üí nextStart = 23/01, nextEnd = 30/01 (semanal)
  
  // 4. Criar pr√≥xima sprint
  const nextSprint = await createSprint({
    title: current.title,
    type: current.type,
    department: current.department,
    start_date: nextDates.start_date,
    end_date: nextDates.end_date,
    status: 'em andamento',
    parent_id: current.id  // Link hist√≥rico
  });
  
  // 5. Copiar itens pendentes (carry-over)
  const pendingItems = current.items.filter(i => i.status !== 'conclu√≠do');
  
  for (const item of pendingItems) {
    await createSprintItem({
      sprint_id: nextSprint.id,
      type: item.type,
      title: item.title,
      description: item.description,
      responsible: item.responsible,
      status: item.status,
      is_carry_over: true  // ‚Üê Marcado como carry-over
    });
  }
  
  return { ...nextSprint, items: copiedItems };
}
```

#### Supabase (SQL)

```sql
-- 1. UPDATE sprint atual
UPDATE sprints 
SET status = 'conclu√≠da' 
WHERE id = 'sprint-w3';

-- 2. INSERT pr√≥xima sprint
INSERT INTO sprints (title, type, department, start_date, end_date, status, parent_id)
VALUES ('Sprint Comercial W3 - Jan 2026', 'semanal', 'comercial', '2026-01-23', '2026-01-30', 'em andamento', 'sprint-w3');

-- 3. INSERT items pendentes
INSERT INTO sprint_items (sprint_id, type, title, status, is_carry_over)
VALUES 
  ('sprint-w4', 'iniciativa', 'Atualizar CRM', 'pendente', true),
  ('sprint-w4', 'iniciativa', 'Criar apresenta√ß√£o', 'pendente', true);
```

---

## üé® Interface do Usu√°rio

### Tela de Listagem (SprintList.tsx)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Ritmo de Execu√ß√£o                          ‚îÇ
‚îÇ  [+ Nova Sprint]  [Filtros ‚ñº]               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ üèÉ Sprint Comercial W3               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ üìÖ 15/01 - 22/01 | SEMANAL           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ üè¢ Comercial | üü¢ Em Execu√ß√£o       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ üìä 60% conclu√≠do (3/5)               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ [Abrir Sprint ‚Üí]                     ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ üèÉ Sprint Marketing W3               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ...                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Tela de Detalhes (SprintDetailStyled.tsx)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ö° SPRINT COMERCIAL W3 - JAN 2026                       ‚îÇ
‚îÇ üìÖ 15/01/2026 - 22/01/2026 | üè¢ Comercial              ‚îÇ
‚îÇ üü¢ EM EXECU√á√ÉO          [Finalizar Sprint] [Editar]    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìä PROGRESSO DA SPRINT               60%                ‚îÇ
‚îÇ [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]                            ‚îÇ
‚îÇ 0% Iniciado                                Meta: 100%   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìã INICIATIVAS (3/5)    ‚îÇ üõ°Ô∏è IMPEDIMENTOS (2)          ‚îÇ
‚îÇ [+ Adicionar]           ‚îÇ [+ Adicionar]                 ‚îÇ
‚îÇ                         ‚îÇ                               ‚îÇ
‚îÇ ‚úÖ Campanha LinkedIn    ‚îÇ ‚ö†Ô∏è CRM fora do ar             ‚îÇ
‚îÇ üë§ Geraldo Hisao        ‚îÇ üìù Desde 18/01                ‚îÇ
‚îÇ üìÖ At√© 20/01            ‚îÇ                               ‚îÇ
‚îÇ                         ‚îÇ ‚ö†Ô∏è Or√ßamento bloqueado        ‚îÇ
‚îÇ ‚úÖ Webinar B2B          ‚îÇ                               ‚îÇ
‚îÇ                         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚è≥ Atualizar CRM        ‚îÇ üí¨ DECIS√ïES (1)               ‚îÇ
‚îÇ (Em Andamento)          ‚îÇ [+ Adicionar]                 ‚îÇ
‚îÇ                         ‚îÇ                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ "Aprovar desconto 20%         ‚îÇ
                          ‚îÇ  para Enterprise"             ‚îÇ
                          ‚îÇ ‚Äî CEO                         ‚îÇ
                          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üöÄ Funcionalidades Especiais

### 1. **Carry-Over Autom√°tico**

Ao finalizar uma sprint, itens **n√£o conclu√≠dos** s√£o automaticamente copiados para a pr√≥xima:

```typescript
// Sprint W3: 5 iniciativas
// - 3 conclu√≠das ‚úÖ
// - 2 pendentes ‚è≥

// Ao finalizar
finalizeAndCreateNext('sprint-w3');

// Sprint W4 criada com:
// - 2 iniciativas copiadas (is_carry_over = true)
// - Badge especial: üîÅ Carry-over
```

### 2. **V√≠nculo com M√∫ltiplos OKRs**

Uma sprint pode focar em at√© **3 OKRs** simultaneamente:

```typescript
// Sprint pode ter:
okr_ids: ['okr-receita', 'okr-churn', 'okr-vendas']

// Filtra por departamento
const okrsDisponiveis = okrs.filter(o => 
  o.department === 'comercial' || o.department === 'geral'
);
```

### 3. **Respons√°vel Flex√≠vel**

**3 modos de atribui√ß√£o:**

```typescript
// 1. Nenhum respons√°vel
{ responsible: null, responsible_user_id: null }

// 2. Respons√°vel interno (usu√°rio do sistema)
{ responsible: 'Geraldo Hisao', responsible_user_id: 'user123' }

// 3. Respons√°vel externo (nome livre)
{ responsible: 'Consultor XYZ', responsible_user_id: null }
```

### 4. **Progresso Visual**

```typescript
// C√°lculo autom√°tico
const completed = items.filter(i => i.status === 'conclu√≠do').length;
const progress = Math.round((completed / items.length) * 100);

// Renderiza√ß√£o
<div className="progress-bar">
  <div style={{ width: `${progress}%` }} />
</div>
```

### 5. **Exporta√ß√£o PDF**

```typescript
// Bot√£o na interface
<button onClick={handleExport}>Exportar PDF</button>

// Fun√ß√£o
const handleExport = async () => {
  await exportElementToPDF(printableRef.current, {
    filename: `Sprint-${selectedSprint.title}.pdf`
  });
};
```

---

## üîß Configura√ß√µes Avan√ßadas

### Personalizar Dura√ß√£o de Sprints

```typescript
// sprint.service.ts ‚Üí calculateNextSprintDates

switch (type) {
  case 'semanal':
    nextEnd.setDate(nextEnd.getDate() + 6);  // Altere aqui
    break;
  case 'mensal':
    nextEnd.setMonth(nextEnd.getMonth() + 1);
    break;
  // ...
}
```

### Personalizar Cache TTL

```typescript
// sprint.service.ts
const CACHE_TTL = 10000; // Altere aqui (em milissegundos)

// Exemplos:
// 5 segundos: 5000
// 30 segundos: 30000
// 1 minuto: 60000
```

### Personalizar M√°ximo de OKRs

```typescript
// SprintForm.tsx
okr_ids: z.array(z.string()).max(3, 'M√°ximo 3 OKRs')

// Para permitir 5:
okr_ids: z.array(z.string()).max(5, 'M√°ximo 5 OKRs')
```

---

## üìä Relat√≥rios e M√©tricas

### M√©tricas Dispon√≠veis

```typescript
interface SprintMetrics {
  total: number;         // Total de sprints
  planned: number;       // Planejadas
  in_progress: number;   // Em andamento
  completed: number;     // Conclu√≠das
}

// Uso
const metrics = await getSprintMetrics();
// { total: 12, planned: 2, in_progress: 5, completed: 5 }
```

### Calcular Taxa de Conclus√£o

```typescript
const completionRate = (sprint: SprintWithItems) => {
  const completed = sprint.items.filter(i => i.status === 'conclu√≠do').length;
  return (completed / sprint.items.length) * 100;
};
```

### Itens por Tipo

```typescript
const itemsByType = getSprintItemsByType(sprint.items);

// Retorna:
{
  iniciativa: [ {...}, {...} ],
  impedimento: [ {...} ],
  decis√£o: [ {...} ],
  atividade: [],
  marco: []
}

// Uso
const totalIniciativas = itemsByType.iniciativa.length;
const iniciativasConcluidas = itemsByType.iniciativa
  .filter(i => i.status === 'conclu√≠do').length;
```

---

## üéØ Melhores Pr√°ticas

### 1. **Planeje Antes de Executar**

```
‚ùå RUIM: Criar sprint e j√° sair adicionando itens sem pensar
‚úÖ BOM: 
  1. Criar sprint
  2. Revisar OKRs vinculados
  3. Planejar iniciativas principais
  4. Executar durante a semana
  5. Finalizar e revisar
```

### 2. **Use Carry-Over com Modera√ß√£o**

```
‚ùå RUIM: Todas as sprints com 10+ itens carry-over
‚úÖ BOM: 
  - M√°ximo 20-30% de carry-over
  - Analisar por que itens n√£o foram conclu√≠dos
  - Replaanejar ou cancelar itens antigos
```

### 3. **Mantenha Sprints Focadas**

```
‚ùå RUIM: 20 iniciativas em uma sprint semanal
‚úÖ BOM:
  - Semanal: 5-7 iniciativas
  - Mensal: 10-15 iniciativas
  - Trimestral: 20-30 iniciativas
```

### 4. **Registre Impedimentos Rapidamente**

```
‚úÖ Assim que identificar um bloqueio, registre!
  - Visibilidade para o time
  - Prioriza√ß√£o de resolu√ß√£o
  - Hist√≥rico de problemas
```

### 5. **Decis√µes Sejam Claras**

```
‚ùå RUIM: "Fazer algo sobre pre√ßos"
‚úÖ BOM: "Aprovar desconto de 20% para Enterprise acima de R$ 100k/ano"
```

---

## üß™ Testes de Funcionalidade

### Checklist Completo

**OKRs:**
- [ ] Criar OKR estrat√©gico
- [ ] Adicionar 3 Key Results
- [ ] Editar OKR
- [ ] Atualizar valor de KR
- [ ] Ver progresso calculado
- [ ] Deletar OKR

**Sprints:**
- [ ] Criar sprint semanal
- [ ] Vincular a 2 OKRs
- [ ] Adicionar 3 iniciativas
- [ ] Adicionar 1 impedimento
- [ ] Adicionar 1 decis√£o
- [ ] Marcar iniciativa como conclu√≠da
- [ ] Ver progresso atualizar
- [ ] Finalizar sprint
- [ ] Ver pr√≥xima sprint criada
- [ ] Ver itens pendentes copiados

**Performance:**
- [ ] Abrir sprint < 1s
- [ ] Reabrir sprint = instant√¢neo (cache)
- [ ] Adicionar item < 1s
- [ ] Marcar conclu√≠do < 1s

---

## üìö Recursos Adicionais

### Documentos Relacionados

- `DOCUMENTACAO_MODULO_OKR_SPRINT.md` - Documenta√ß√£o t√©cnica completa
- `MELHORIAS_UX_IMPLEMENTADAS.md` - Hist√≥rico de melhorias de UX
- `OTIMIZACOES_PERFORMANCE_SPRINT.md` - Detalhes das otimiza√ß√µes
- `SOLUCAO_PROBLEMA_SPRINT_ITEMS.md` - Troubleshooting de erros

### Scripts SQL

- `ADICIONAR_TODAS_COLUNAS_DEFINITIVO.sql` - Corrigir sprint_items
- `CORRIGIR_TABELA_SPRINTS.sql` - Corrigir sprints
- `ADICIONAR_PARENT_ID_UPDATED_AT.sql` - Colunas opcionais

---

## ‚ùì FAQ

**P: Posso ter uma sprint sem OKR vinculado?**  
**R:** Sim! Sprints podem ser departamentais e n√£o vinculadas a nenhum OKR.

**P: Quantas iniciativas posso adicionar?**  
**R:** N√£o h√° limite t√©cnico, mas recomendamos 5-7 por sprint semanal.

**P: O que acontece com itens pendentes ao finalizar?**  
**R:** S√£o automaticamente copiados para a pr√≥xima sprint com flag `is_carry_over = true`.

**P: Posso editar uma sprint ap√≥s criada?**  
**R:** Sim! Clique no √≠cone de editar no header da sprint.

**P: Como fa√ßo para deletar um item?**  
**R:** Passe o mouse sobre o item e clique no √≠cone de lixeira que aparece.

**P: O cache pode causar dados desatualizados?**  
**R:** N√£o! O cache √© invalidado automaticamente ao criar/atualizar/deletar itens.

**P: Preciso executar todos os scripts SQL?**  
**R:** N√£o! O c√≥digo tem fallbacks. Mas scripts garantem funcionalidade completa.

---

**üéØ Agora voc√™ √© expert em Sprints!** üöÄ
